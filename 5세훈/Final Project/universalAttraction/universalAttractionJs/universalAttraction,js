'use strict'

const $btn_select_box_title=document.querySelector('.btn_select_box_title')
// console.log($btn_select_box_title.chdcked);


const dropdownBtnList = document.querySelectorAll('.btn_select');

dropdownBtnList.forEach(item => {
    const arrowIcon = item.querySelector('.fa-caret-down');
    item.addEventListener('click', e => {
        console.log(e.currentTarget);
        // console.log(item);
        arrowIcon.classList.toggle('fa-caret-down-rotate', !item.classList.contains('on'));
        item.classList.toggle('on', !item.classList.contains('on'));
        
    });
    
            // item.addEventListener('focusout', e => {
                
            //     // console.log(item.parentNode);
            //     item.classList.remove('on');
            //     arrowIcon.classList.remove('fa-caret-down-rotate');
                
            // })
     
    

})

const list1 = document.querySelector('.attraction_list_member');

list1.addEventListener('click', (event) => {
    if (event.target.nodeName === "li") {
        btn.innerText = event.target.innerText;
        btn.classList.remove('on');
    }
});
const $attraction_list_member = document.querySelector('.attraction_specialList');
const $list = $attraction_list_member.querySelectorAll('li');
const $boxTittle = document.querySelector('.btn_select_box1');
const $btn_select_mode1 = document.querySelector('.btn_select_mode1');



const $attraction_list_member2 = document.querySelector('.attraction_Limit');
const $list2 = $attraction_list_member2.querySelectorAll('li');
const $boxTittle2 = document.querySelector('.btn_select_box2');
const $btn_select_mode2 = document.querySelector('.btn_select_mode2');


const $attraction_list_member3 = document.querySelector('.attraction_break')
const $list3 = $attraction_list_member3.querySelectorAll('li');
const $boxTittle3 = document.querySelector('.btn_select_box3');
const $btn_select_mode3 = document.querySelector('.btn_select_mode3');

$list.forEach(item=>{ 
    item.addEventListener('click',e =>{ 
        const comment = e.target.textContent;
        $boxTittle.textContent = comment;
        if($btn_select_mode1.classList.contains('on'))
        { 
            $btn_select_mode1.classList.remove('on');
        }
        else{ 
            $btn_select_mode.classList.add('on');
        }
    })
});


$list2.forEach(item=>{ 
    item.addEventListener('click',e =>{ 
        const comment = e.target.textContent;
        $boxTittle2.textContent = comment;
        if($btn_select_mode2.classList.contains('on'))
        { 
            $btn_select_mode2.classList.remove('on');
        }
        else{ 
            $btn_select_mode2.classList.add('on');
        }
    })
})

$list3.forEach(item=>{ 
    item.addEventListener('click',e =>{ 
        const comment = e.target.textContent;
        $boxTittle3.textContent = comment;
        if($btn_select_mode3.classList.contains('on'))
        { 
            $btn_select_mode3.classList.remove('on');
        }
        else{ 
            $btn_select_mode3.classList.add('on');
        }
    })
})







/*
    const btn = document.querySelectorAll('.btn_select');
 

    const list2 = document.querySelector('.attraction_list_member2');
    const list3 = document.querySelector('.attraction_list_member3');
    const list4 = document.querySelector('.attraction_list_member4');

        
        btn.forEach((item,idx)=>{
             const icon = item.querySelector('.fa-caret-down');
            item.addEventListener('click', (e) => {
                item.classList.toggle('on');
                icon.classList.toggle('fa-caret-down-rotate');
                
                btn.forEach((item2,idx2)=>{
                    if(idx !== idx2){
                        const icon2 = document.querySelectorAll('.fa-caret-down')
                        icon2.forEach((item3,idx3)=>{
                                item3.classList.toggle('fa-caret-down-rotate',idx3===idx);
                        })
                    item2.classList.remove('on');
                    }
                })
          });
        });

        




        
  */  
        

        fetch('universalAttractionJs/json/data.json')
        .then(res => res.json())
        .then(result => { 
            // console.log(result);
            makeList(result);
            
        })
        
        const arr = [];
        let selectedArea = '슈퍼 닌텐도 월드';
        let selectedSpecial = '어린이에게 추천';
        let selectedLimit = '제한 없음';
        let selectedExpress = false;
        let selectedAlign = '운영중'
        
        function test1(test){ 
            arr.push(test);
        }
        
        const $attraction__listHeaderNum = document.querySelector('.attraction__listHeaderNum')
        console.log(arr);
        function filterFn(){
            setTimeout(function(){ 
                late()
            },100) 
        }
        filterFn();
                
    //    0.1초지난 후 함수
        function late(){
            let result = arr.filter(item=>{ 
                const condition_1 = (item.area === selectedArea);
                const condition_2 = (item.special === selectedSpecial);
                const condition_3 = (item.limit === selectedLimit);
                const condition_4 = (item.express === selectedExpress);
                const condition_5 = (item.align === selectedAlign);

                return condition_1 && condition_2 && condition_3 && condition_4 && condition_5; 
            });
            console.log(result);
            result.forEach((ff)=>{
                makeItem(ff)
            })

            $attraction__listHeaderNum.innerHTML= result.length
        }

        

        function makeList(items){
            $attractionContainer.innerHTML = null;
            items.forEach((item,index)=>{ 
                makeItem(item);
                test_choi(item)
            });
        }
        function test_choi(item){
            test1(item);
        }

        function makeItem(item,index){ 
            // test1(item);
            console.log(item);
            
            const $div = document.createElement('div');
            $attractionContainer.innerHTML=''
            $div.classList.add('item__box');
            // console.log(item.id.length);
            // function test(){
            //     if(item.id.length<=25){
            //         return 'item_topComment_space'
            //     }
            //     return ''
            // }
            let attractionlist = ''
            if (item.attraction==='playlandEtc') {
                attractionlist ='플레이랜드 기타';
            }
            if(item.attraction==='showAttraction'){ 
                attractionlist = '쇼 어트랙션';
            }
            if(item.attraction==='rideAttraction'){ 
                attractionlist = '라이드 어트랙션';
            }
            if(item.attraction==='streetShow'){ 
                attractionlist = '스트리트 쇼';
            }
            if(item.attraction==='game'){ 
                attractionlist = '게임';
            }



            $div.innerHTML=`
                <a href="#">
                <img src="./universalAttractionImage/${item.area}_${item.id}.jpg" class="item_choi_img">
                                
                <div class="item_comment">
                    <div class="item_topComment">
                        <span class="item__areaSection">${item.area}</span>
                        <button class="item_comment_btn_${item.attraction}">${attractionlist}</button>
                    </div>
                    <div>
                        <span class="item__attractionName">${item.id}</span>
                    </div>
                </div>
                </a>
            `;
            $attractionContainer.appendChild($div);
        }

        










        const $attractionContainer = document.querySelector("#attraction__bodyCotainer");

        function selectAll(selectAll){ 
            const checkBox = document.querySelectorAll('input[type="checkbox"]');
            console.log('input[type="checkbox"]');
            checkBox.forEach((checkbox)=>{ 
                checkbox.checked =selectAll.checked;
            })
        }
        
        
        




        